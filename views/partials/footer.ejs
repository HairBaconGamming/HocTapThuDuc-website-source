</main> <footer style="margin-top: 60px; padding: 40px 20px; text-align: center; border-top: 2px dashed #eee; color: #888;">
    <div class="container">
        <h3 style="color: var(--primary); margin-bottom: 10px;">Há»c Táº­p Thá»§ Äá»©c</h3>
        <p>NÆ¡i kiáº¿n thá»©c khÃ´ng bao giá» "ngá»§ gáº­t" ğŸ˜´</p>
        
        <div style="margin-top: 20px; font-size: 0.9rem;">
            <p>Code báº±ng ğŸœ MÃ¬ tÃ´m vÃ  â˜• Cafe bá»Ÿi <b>NAM</b> vÃ  Gemini</p>
            <p>Â© <%= new Date().getFullYear() %> - Cháº¡y á»•n Ä‘á»‹nh trÃªn mÃ¡y cá»§a Nam (mÃ¡y khÃ¡c hÃªn xui)</p>
        </div>
    </div>
</footer>

<% if (typeof user !== 'undefined' && user) { %>
<script>
    (function() {
        // HÃ m gá»­i nhá»‹p tim
        function sendHeartbeat() {
            // Chá»‰ gá»­i khi tab Ä‘ang má»Ÿ (trÃ¡nh tÃ­nh giá» treo mÃ¡y)
            if (document.visibilityState === 'visible') {
                fetch('/api/activity/heartbeat', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                }).catch(err => { /* Silent fail to not disturb user */ });
            }
        }

        // Gá»­i má»—i 60 giÃ¢y (1 phÃºt)
        setInterval(sendHeartbeat, 60000);
        
        // Gá»­i ngay 1 láº§n sau 5s vÃ o trang Ä‘á»ƒ tÃ­nh phÃºt Ä‘áº§u tiÃªn
        setTimeout(sendHeartbeat, 5000);
    })();
</script>
<% } %>

<script src="/js/alerts.js"></script>
<script>
    // --- KEEP ALIVE SYSTEM ---
    // Render.com Free Tier sáº½ ngá»§ sau 15p khÃ´ng hoáº¡t Ä‘á»™ng.
    // Script nÃ y sáº½ "chá»c" server má»—i 10 phÃºt (600.000ms) Ä‘á»ƒ giá»¯ káº¿t ná»‘i.
    
    const PING_INTERVAL = 10 * 60 * 1000; // 10 phÃºt

    setInterval(() => {
        fetch('/api/ping')
            .then(res => {
                // console.log('Keep-alive ping:', res.status); // Báº­t náº¿u muá»‘n debug
            })
            .catch(err => {
                console.warn('Keep-alive failed:', err);
            });
    }, PING_INTERVAL);
</script>
</body>
</html>