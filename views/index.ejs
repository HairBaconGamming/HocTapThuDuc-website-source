<%- include('partials/header') %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>

<style>
    /* --- CSS BI·∫æN --- */
    :root {
        --hero-bg: #fffbf0;
        --card-bg: #ffffff;
        --border-color: #1e1e1e;
        --accent-yellow: #ffeb3b;
        --accent-pink: #ff80ab;
        --accent-blue: #82b1ff;
    }

    body { background-color: var(--hero-bg); }

    /* --- HERO SECTION --- */
    .hero-wrapper {
        position: relative;
        padding: 60px 20px;
        overflow: hidden;
        text-align: center;
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .mascot-float {
        width: 150px;
        animation: float 3s ease-in-out infinite;
        margin-bottom: 20px;
        filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
    }

    .hero-badge-pill {
        background: #000;
        color: #fff;
        padding: 8px 20px;
        border-radius: 50px;
        font-weight: 700;
        font-size: 0.9rem;
        display: inline-block;
        margin-bottom: 20px;
        transform: rotate(-2deg);
        box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
    }

    .hero-title-genz {
        font-family: 'Quicksand', sans-serif;
        font-size: 3.5rem;
        line-height: 1.1;
        font-weight: 900;
        color: #1e1e1e;
        margin-bottom: 20px;
    }
    .hero-title-genz span {
        background: linear-gradient(120deg, #ffeb3b 0%, #ffeb3b 100%);
        background-repeat: no-repeat;
        background-size: 100% 40%;
        background-position: 0 90%;
    }

    .hero-desc {
        font-size: 1.2rem;
        color: #555;
        max-width: 600px;
        margin: 0 auto 30px;
        line-height: 1.6;
    }

    .cta-group {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn-brutal {
        padding: 15px 35px;
        font-size: 1.1rem;
        font-weight: 800;
        border: 3px solid #000;
        border-radius: 12px;
        cursor: pointer;
        transition: 0.2s;
        text-decoration: none;
        box-shadow: 4px 4px 0px #000;
    }
    .btn-brutal.primary { background: var(--accent-yellow); color: #000; }
    .btn-brutal.secondary { background: #fff; color: #000; }
    
    .btn-brutal:hover {
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0px #000;
    }
    .btn-brutal:active {
        transform: translate(2px, 2px);
        box-shadow: 0px 0px 0px #000;
    }

    /* --- BENTO GRID FEATURES --- */
    .bento-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        max-width: 1100px;
        margin: 0 auto 60px;
        padding: 0 20px;
    }

    .bento-card {
        background: var(--card-bg);
        border: 3px solid #000;
        border-radius: 20px;
        padding: 25px;
        box-shadow: 6px 6px 0px rgba(0,0,0,0.1);
        transition: transform 0.3s;
        position: relative;
        overflow: hidden;
    }
    .bento-card:hover { transform: translateY(-5px); }
    
    .bento-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
    .bento-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 10px; }
    .bento-desc { color: #666; line-height: 1.5; }

    /* Card ƒë·∫∑c bi·ªát */
    .card-wide { grid-column: span 2; background: #e3f2fd; }
    .card-pink { background: #fce4ec; }
    .card-green { background: #e8f5e9; }

    /* --- MARQUEE (CH·ªÆ CH·∫†Y) --- */
    .marquee-container {
        background: #000;
        color: #fff;
        padding: 10px 0;
        overflow: hidden;
        white-space: nowrap;
        margin-bottom: 40px;
        transform: rotate(-1deg);
        border-top: 2px solid #fff;
        border-bottom: 2px solid #fff;
    }
    .marquee-content {
        display: inline-block;
        animation: marquee 20s linear infinite;
        font-family: 'Courier New', monospace;
        font-weight: bold;
        font-size: 1.1rem;
    }

    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .hero-title-genz { font-size: 2.5rem; }
        .card-wide { grid-column: span 1; }
        .marquee-container { transform: rotate(0deg); }
    }
</style>

<div class="marquee-container">
    <div class="marquee-content">
        üì¢ CH√ÄO M·ª™NG ƒê·∫æN V·ªöI C·ªòNG ƒê·ªíNG H·ªåC T·∫¨P THPT TH·ª¶ ƒê·ª®C ‚ú® H·ªåC H·∫æT S·ª®C - CH∆†I H·∫æT M√åNH ‚ú® L√ÄM CH·ª¶ KI·∫æN TH·ª®C ‚ú® CHINH PH·ª§C T∆Ø∆†NG LAI üöÄ
    </div>
</div>

<div class="hero-wrapper">
    <div style="position: absolute; top: 10%; left: 5%; font-size: 3rem; opacity: 0.2; transform: rotate(-15deg);">‚úèÔ∏è</div>
    <div style="position: absolute; bottom: 15%; right: 5%; font-size: 3rem; opacity: 0.2; transform: rotate(15deg);">üìê</div>

    <img src="/api/pro-images/1752242181665-mcpehv.png" class="mascot-float" alt="Mascot">

    <% if (!user) { %>
        <div class="hero-badge-pill">üöÄ C·ªïng Th√¥ng Tin S·ªë 1</div>
        <h1 class="hero-title-genz">H·ªçc T·∫≠p <span id="typewriter"></span></h1>
        
        <p class="hero-desc">
            Kh√¥ng c√≤n n·ªói lo b√†i kh√≥. Kho t√†i li·ªáu "si√™u to kh·ªïng l·ªì", c·ªông ƒë·ªìng h·ªó tr·ª£ 24/7 v√† h·ªá th·ªëng nu√¥i c√¢y ·∫£o c·ª±c cu·ªën ƒëang ch·ªù b·∫°n!
        </p>

        <div class="cta-group">
            <a href="/register" class="btn-brutal primary">‚ú® ƒêƒÉng K√Ω Ngay</a>
            <a href="/login" class="btn-brutal secondary">üëã ƒêƒÉng Nh·∫≠p</a>
        </div>
    <% } else { %>
        <div class="hero-badge-pill">üëã Hello, <%= user.username %>!</div>
        <h1 class="hero-title-genz">H√¥m nay <br> <span>"Di·ªát G·ªçn"</span> m√¥n n√†o?</h1>
        
        <div class="cta-group">
            <div class="bento-card card-green" style="padding: 15px 25px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-bolt" style="color: #2e7d32; font-size: 1.5rem;"></i>
                <div>
                    <div style="font-weight: 800; font-size: 1.2rem;"><%= typeof totalVisits !== 'undefined' ? totalVisits : 0 %></div>
                    <div style="font-size: 0.8rem; text-transform: uppercase;">L∆∞·ª£t truy c·∫≠p</div>
                </div>
            </div>
            <div class="bento-card card-pink" style="padding: 15px 25px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-users" style="color: #c2185b; font-size: 1.5rem;"></i>
                <div>
                    <div style="font-weight: 800; font-size: 1.2rem;"><%= typeof totalUsers !== 'undefined' ? totalUsers : 0 %></div>
                    <div style="font-size: 0.8rem; text-transform: uppercase;">Th√†nh vi√™n</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px;">
            <a href="/dashboard" class="btn-brutal primary">üöÄ V√†o B·∫£ng ƒêi·ªÅu Khi·ªÉn</a>
        </div>
    <% } %>
</div>

<div class="container">
    <h2 style="text-align: center; font-weight: 900; font-size: 2rem; margin-bottom: 40px;">‚ú® T√çNH NƒÇNG "ƒê·ªàNH N√ìC" ‚ú®</h2>
    
    <div class="bento-grid">
        <div class="bento-card card-wide">
            <span class="bento-icon">üìö</span>
            <div class="bento-title">Kho T√†i Li·ªáu Ch·∫•t</div>
            <div class="bento-desc">T·ªïng h·ª£p ƒë·ªÅ thi, b√†i gi·∫£ng x·ªãn s√≤ t·ª´ c√°c tr∆∞·ªùng top. Kh√¥ng lo thi·∫øu b√†i √¥n t·∫≠p.</div>
        </div>
        
        <div class="bento-card card-green">
            <span class="bento-icon">üåµ</span>
            <div class="bento-title">My Garden</div>
            <div class="bento-desc">H·ªçc chƒÉm ch·ªâ t√≠ch ƒëi·ªÉm nu√¥i c√¢y ·∫£o. V∆∞·ªùn c√†ng x·ªãn, tr√¨nh c√†ng cao!</div>
        </div>
        
        <div class="bento-card card-pink">
            <span class="bento-icon">üí¨</span>
            <div class="bento-title">C·ªông ƒê·ªìng</div>
            <div class="bento-desc">B√≠ b√†i th√¨ h·ªèi, 500 anh em v√†o c·ª©u net ngay l·∫≠p t·ª©c.</div>
        </div>

        <div class="bento-card">
            <span class="bento-icon">üèÜ</span>
            <div class="bento-title">ƒêua Top</div>
            <div class="bento-desc">B·∫£ng x·∫øp h·∫°ng vinh danh nh·ªØng "h·ªçc b√°" chƒÉm ch·ªâ nh·∫•t tu·∫ßn.</div>
        </div>
        
        <div class="bento-card" style="background: #fff3e0;">
            <span class="bento-icon">üéÆ</span>
            <div class="bento-title">Minigame</div>
            <div class="bento-desc">Gi·∫£i tr√≠ nh·∫π nh√†ng sau gi·ªù h·ªçc cƒÉng th·∫≥ng.</div>
        </div>
    </div>

    <% if (latestNews && latestNews.length > 0) { %>
        <section style="margin-bottom: 60px;">
            <div style="background: #1e1e1e; color: #fff; padding: 15px 30px; border-radius: 15px 15px 0 0; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0; font-size: 1.2rem;">üì∞ B·∫£ng Tin M·ªõi</h3>
                <a href="/news" style="color: #ffeb3b; text-decoration: none; font-weight: bold;">Xem t·∫•t c·∫£ &rarr;</a>
            </div>
            <div style="border: 3px solid #1e1e1e; border-top: none; padding: 20px; border-radius: 0 0 15px 15px; background: #fff;">
                <% latestNews.forEach(news => { %>
                    <div style="border-bottom: 1px dashed #ccc; padding: 10px 0; display: flex; align-items: center; gap: 15px;">
                        <span style="background: #eee; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;"><%= news.category %></span>
                        <a href="/news/<%= news._id %>" style="color: #333; text-decoration: none; font-weight: 600; flex: 1;"><%= news.title %></a>
                        <span style="color: #999; font-size: 0.9rem;"><%= new Date(news.createdAt).toLocaleDateString('vi-VN') %></span>
                    </div>
                <% }) %>
            </div>
        </section>
    <% } %>
</div>

<script>
    // Typewriter Effect
    var app = document.getElementById('typewriter');
    if(app) {
        var typewriter = new Typewriter(app, {
            loop: true,
            delay: 75,
        });

        typewriter
            .typeString('Chill Chill')
            .pauseFor(1000)
            .deleteAll()
            .typeString('Hi·ªáu Qu·∫£')
            .pauseFor(1000)
            .deleteAll()
            .typeString('ƒê·ªôt Ph√°')
            .pauseFor(1000)
            .start();
    }

    // GSAP Animation
    gsap.from(".hero-title-genz", { duration: 1, y: 50, opacity: 0, ease: "back.out(1.7)" });
    gsap.from(".bento-card", { 
        duration: 0.8, 
        y: 50, 
        opacity: 0, 
        stagger: 0.1, 
        scrollTrigger: ".bento-grid" 
    });
</script>

<%- include('partials/footer') %>