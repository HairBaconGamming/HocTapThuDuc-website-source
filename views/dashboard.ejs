<%- include('partials/header') %>
<style>
    .dashboard-header {
        background: white;
        padding: 30px;
        border-radius: var(--radius);
        margin-bottom: 30px;
        border: 2px dashed var(--primary); /* Vi·ªÅn n√©t ƒë·ª©t */
        display: flex;
        align-items: center;
        gap: 20px;
    }
    .avatar-large {
        width: 80px; height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid var(--secondary);
    }
    .action-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }
    .action-card {
        background: #fff;
        padding: 20px;
        border-radius: 20px;
        text-align: center;
        box-shadow: var(--shadow-hard);
        border: 2px solid transparent;
        cursor: pointer;
    }
    .action-card:hover {
        border-color: var(--accent);
        transform: translateY(-5px);
    }
</style>

<div class="container">
    <div class="dashboard-header">
        <img src="<%= user.avatar || 'https://cdn-icons-png.flaticon.com/512/7915/7915522.png' %>" class="avatar-large">
        <div>
            <h1>Hi, <%= user.username %>!</h1>
            <p style="color: #888;">H√¥m nay b·∫°n mu·ªën l√†m g√¨?</p>
        </div>
        <div style="margin-left: auto;">
            <a href="/profile/edit" class="btn btn-secondary">‚úèÔ∏è S·ª≠a h·ªì s∆°</a>
        </div>
    </div>

    <div class="action-grid">
        <a href="/my-tree" class="action-card">
            <span style="font-size: 2.5rem;">üå±</span>
            <h3>C√¢y c·ªßa t√¥i</h3>
            <p>Level: <b><%= user.treeLevel || 0 %></b></p>
        </a>
        <a href="/lesson/add" class="action-card">
            <span style="font-size: 2.5rem;">üìù</span>
            <h3>So·∫°n b√†i m·ªõi</h3>
            <p>Chia s·∫ª ki·∫øn th·ª©c</p>
        </a>
        <a href="/news/post" class="action-card">
            <span style="font-size: 2.5rem;">üì¢</span>
            <h3>ƒêƒÉng tin</h3>
            <p>Th√¥ng b√°o cho l·ªõp</p>
        </a>
    </div>

    <div style="background: white; padding: 20px; border-radius: var(--radius); border: 2px solid #eee;">
        <h3 style="margin-bottom: 20px;">B√†i h·ªçc c·ªßa t√¥i</h3>
        <% if (lessons && lessons.length > 0) { %>
            <div style="display: grid; gap: 15px;">
                <% lessons.forEach(lesson => { %>
                    <div style="padding: 15px; background: #f9f9f9; border-radius: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin-bottom: 5px;"><%= lesson.title %></h4>
                            <span class="badge" style="background: #e0e0e0;"><%= lesson.subject ? lesson.subject.name : 'Ch∆∞a ph√¢n lo·∫°i' %></span>
                        </div>
                        <div>
                            <a href="/lesson/<%= lesson._id %>" class="btn btn-secondary btn-sm">Xem</a>
                            <a href="/lesson/<%= lesson._id %>/edit" class="btn btn-sm" style="color: #888;">S·ª≠a</a>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <p style="text-align: center; color: #999;">B·∫°n ch∆∞a t·∫°o b√†i h·ªçc n√†o. H√£y th·ª≠ so·∫°n b√†i m·ªõi nh√©!</p>
        <% } %>
    </div>
</div>

<%- include('partials/footer') %>